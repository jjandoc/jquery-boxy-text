/*
 *  jQuery BoxyText - v0.1
 *  Fit text into an element with a given height and width with the largest font size possible.
 *  https://github.com/jjandoc/jquery-boxy-text
 *
 *  Made by Jon Jandoc
 *  Under MIT License
 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="boxyText",d={height:null,width:null,maxFontSize:null,minFontSize:1,lineHeight:null,wrapperClass:"boxy-text-inner"};a.extend(b.prototype,{state:{fontSize:null,height:null,width:null},styles:{"font-size":null,"line-height":null},init:function(){var b=a(this.element);if(this.settings.height=this.settings.height&&"number"==typeof this.settings.height?this.settings.height:b.outerHeight(),this.settings.width=this.settings.width&&"number"==typeof this.settings.width?this.settings.width:b.outerWidth(),null===this.settings.lineHeight){var c=b.css("line-height"),d=parseInt(b.css("font-size").replace("px",""),10);this.settings.lineHeight=c.indexOf("px")>0?parseFloat(c,10)/d:c.indexOf("%")>0?parseFloat(c,10)/100:isNaN(c)?1.2:parseFloat(c,10)}this.styles["line-height"]=this.settings.lineHeight,b.find("."+this.settings.wrapperClass).length<1&&b.wrapInner('<div class="'+this.settings.wrapperClass+'">'),this.$innerWrap=b.find("."+this.settings.wrapperClass),this.updateState();var e=this.compareSize();"equal"!==e&&("larger"===e?this.sizeDown():"smaller"===e&&this.sizeUp())},updateState:function(){this.state.fontSize=parseInt(this.$innerWrap.css("font-size").replace("px",""),10),this.state.height=this.$innerWrap.outerHeight(),this.state.width=this.$innerWrap.outerWidth()},compareSize:function(){return this.state.width>this.settings.width||this.state.height>this.settings.height?"larger":this.state.width<this.settings.width||this.state.height<this.settings.height?"smaller":"equal"},setStyle:function(){this.$innerWrap.css(this.styles)},sizeUp:function(){var a=this.state.fontSize;if(!this.settings.maxFontSize||a<this.settings.maxFontSize){var b=a+1;this.styles["font-size"]=b+"px",this.setStyle(),this.updateState();var c=this.compareSize();"larger"===c?(this.styles["font-size"]=a+"px",this.setStyle()):(this.state.fontSize=b,this.sizeUp())}},sizeDown:function(){var a=this.state.fontSize;if(!this.settings.minFontSize||a>this.settings.minFontSize){var b=a-1;this.styles["font-size"]=b+"px",this.setStyle(),this.updateState();var c=this.compareSize();"larger"===c&&(this.state.fontSize=b,this.sizeDown())}}}),a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);